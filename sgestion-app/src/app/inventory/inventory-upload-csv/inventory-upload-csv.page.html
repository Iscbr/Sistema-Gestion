<ion-header>
  <ion-toolbar>
    <ion-button fill="clear" slot="end" color="dark" (click)="closeModal('CLOSED')">
      <ion-icon name="close" slot="icon-only"></ion-icon>
    </ion-button>
    <ion-title>Subir CSV</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-grid class="ion-text-center">
    <ion-row>
      <ion-col>
        <ion-button shape="round">
          <ion-icon name="attach" slot="start"></ion-icon>
          Adjuntar CSV
          <ion-input type="file" accept="text/csv" (change)="handleFileSelect($event)"></ion-input>
        </ion-button>
      </ion-col>

      <ion-col class="ion-margin-vertical">
        <ion-label>
          {{ csvFile.fileName ? 'Archivo seleccionado: ' + csvFile.fileName : 'No se ha seleccionado ningún archivo' }}
        </ion-label>
      </ion-col>
    </ion-row>

  </ion-grid>

  <ion-card>
    <ion-card-content>
        <ion-row *ngIf="csvFile.content !== ''">
          <ion-col>
            <ion-textarea readonly auto-grow="true" [value]="csvFile.content"></ion-textarea>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="csvFile.content === ''">
          <ion-col class="ion-margin-vertical ion-text-center">
            <ion-text>Adjunte un archivo CSV y verá el contenido aquí.</ion-text>
          </ion-col>
        </ion-row>
    </ion-card-content>
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-row>
      <ion-col>
        <ion-button
          expand="block"
          fill="solid"
          shape="round"
          color="success"
          (click)="sendFileToServer()">
          <ion-icon slot="start" name="arrow-forward"></ion-icon>
          Enviar archivo adjunto
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-footer>
